<?php

// c_log($cArr, false, true, 0, 0);

function c_log($data, $whole_array = false, $iterate_array = true, $start = 0, $end = 0)
{
    if (gettype($data) === "string") {
        $s_a = str_split($data, 20)[0];
        $c_1 = $s_a[0];
        $c_2 = $s_a[1];
        if ($c_1 !== "[" && $c_1 !== "{") {
            $string = $data;

            $script = <<<EOF
            const str = '$string';
            console.log(str);
        EOF;
            echo "<script>";
            echo $script;
            echo "</script>";
        }
        if ($c_1 === "[") {
            if ($$iterate_array) {
                $script = <<<EOL
                const arr = $data;
                for (let x = 0; x < arr.length; x++) {
                    // console.log(x);
                    console.log(arr[x]);
                }
                
            EOL;
                echo "<script>";
                echo $script;
                echo "</script>";
            }
            if (!$iterate_array) {
                $script = <<<EOL
                const arr = $data;
                for (let x = $start; x < $end; x++) {
                    // console.log(x);
                    console.log(arr[x]);
                }
                
            EOL;
                echo "<script>";
                echo $script;
                echo "</script>";
            }
        }
    }
    if (gettype($data) === "array") {

        if ($iterate_array) {

            $script = <<<EOL
                const arr = $data;
                for (let x = 0; x < arr.length; x++) {
                    // console.log(x);
                    console.log(arr[x]);
                }
                
            EOL;
            echo "<script>";
            echo $script;
            echo "</script>";
        }
        if (!$iterate_array) {
            $array = json_encode($data);
            $script = <<<EOL
                const arrIterate = $array;
                for (let x = $start; x < $end; x++) {
                    // console.log(arrIterate[x]);
                    console.log(arrIterate[x]);
                }
                
            EOL;
            echo "<script>";
            echo $script;
            echo "</script>";
        }

        if (!$iterate_array && $whole_array) {
            $array = json_encode($data);
            $script = <<<EOL
                const arrWhole = $array;
                    console.log(arrWhole);
            EOL;
            echo "<script>";
            echo $script;
            echo "</script>";
        }
    }
    if (gettype($data) === "object") {
        $obj = json_encode($data);
        $script = <<<EOL
                const obj = $obj;
                    console.log(obj);
            EOL;
        echo "<script>";
        echo $script;
        echo "</script>";
    }
}
